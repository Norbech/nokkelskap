<UserControl x:Class="KeyCabinetApp.UI.Views.LogViewerView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1200">
    
    <Grid Margin="32">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Header -->
        <TextBlock Grid.Row="0" 
                  Text="Hendelseslogg"
                  Style="{StaticResource MaterialDesignHeadline4TextBlock}"
                  Margin="0,0,0,24"/>

        <!-- Filters -->
        <materialDesign:Card Grid.Row="1" Padding="16" Margin="0,0,0,16">
            <StackPanel>
                <TextBlock Text="Filtrer hendelser"
                          Style="{StaticResource MaterialDesignSubtitle1TextBlock}"
                          Margin="0,0,0,16"/>

                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <DatePicker Grid.Column="0"
                               materialDesign:HintAssist.Hint="Fra dato"
                               SelectedDate="{Binding StartDate}"
                               Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                               Margin="0,0,8,0"/>

                    <DatePicker Grid.Column="1"
                               materialDesign:HintAssist.Hint="Til dato"
                               SelectedDate="{Binding EndDate}"
                               Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                               Margin="8,0,8,0"/>

                    <Button Grid.Column="2"
                           Content="OPPDATER"
                           Command="{Binding RefreshCommand}"
                           Style="{StaticResource MaterialDesignRaisedButton}"
                           Height="48"
                           Margin="8,0,0,0"/>
                </Grid>
            </StackPanel>
        </materialDesign:Card>

        <!-- Events list -->
        <DataGrid Grid.Row="2"
                 ItemsSource="{Binding Events}"
                 AutoGenerateColumns="False"
                 CanUserAddRows="False"
                 CanUserDeleteRows="False"
                 IsReadOnly="True"
                 SelectionMode="Single"
                 materialDesign:DataGridAssist.CellPadding="8">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Tidspunkt" 
                                   Binding="{Binding Timestamp, StringFormat='{}{0:dd.MM.yyyy HH:mm:ss}'}"
                                   Width="150"/>
                <DataGridTextColumn Header="Bruker" 
                                   Binding="{Binding User.Name}"
                                   Width="150"/>
                <DataGridTextColumn Header="NÃ¸kkel" 
                                   Binding="{Binding Key.Name}"
                                   Width="150"/>
                <DataGridTextColumn Header="Slot" 
                                   Binding="{Binding SlotId}"
                                   Width="60"/>
                <DataGridTextColumn Header="Handling" 
                                   Binding="{Binding ActionType}"
                                   Width="120"/>
                <DataGridTextColumn Header="Metode" 
                                   Binding="{Binding AuthMethod}"
                                   Width="80"/>
                <DataGridCheckBoxColumn Header="OK" 
                                       Binding="{Binding Success}"
                                       Width="60"/>
                <DataGridTextColumn Header="Detaljer" 
                                   Binding="{Binding Details}"
                                   Width="*"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Actions -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,16,0,0">
            <Button Content="EKSPORTER TIL CSV"
                   Command="{Binding ExportCommand}"
                   Style="{StaticResource MaterialDesignOutlinedButton}"
                   Height="48"
                   Margin="0,0,16,0"/>

            <Button Content="LUKK"
                   Command="{Binding CloseCommand}"
                   Style="{StaticResource MaterialDesignRaisedButton}"
                   Height="48"/>
        </StackPanel>
    </Grid>
</UserControl>
