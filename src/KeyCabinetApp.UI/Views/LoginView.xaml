<UserControl x:Class="KeyCabinetApp.UI.Views.LoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="800">
    
    <Grid Background="{DynamicResource MaterialDesignPaper}">
        <!-- Main content centered -->
        <StackPanel VerticalAlignment="Center" HorizontalAlignment="Center" Width="500">
            
            <!-- RFID Icon -->
            <materialDesign:PackIcon Kind="CardAccountDetails" 
                                    Width="120" Height="120"
                                    HorizontalAlignment="Center"
                                    Foreground="{DynamicResource PrimaryHueMidBrush}"
                                    Margin="0,0,0,32"
                                    Visibility="{Binding ShowPasswordLogin, Converter={StaticResource InverseBoolToVisConverter}}"/>

            <!-- Status message -->
            <TextBlock Text="{Binding StatusMessage}"
                      Style="{StaticResource MaterialDesignHeadline6TextBlock}"
                      TextAlignment="Center"
                      TextWrapping="Wrap"
                      Margin="0,0,0,32">
                <TextBlock.Foreground>
                    <SolidColorBrush Color="{Binding IsError, Converter={StaticResource BoolToErrorColorConverter}}"/>
                </TextBlock.Foreground>
            </TextBlock>

            <!-- Password login card (hidden by default) -->
            <materialDesign:Card Visibility="{Binding ShowPasswordLogin, Converter={StaticResource BooleanToVisibilityConverter}}"
                                Padding="32" Margin="0,0,0,16">
                <StackPanel>
                    <TextBlock Text="Logg inn med brukernavn"
                              Style="{StaticResource MaterialDesignHeadline5TextBlock}"
                              Margin="0,0,0,24"/>

                    <TextBox materialDesign:HintAssist.Hint="Brukernavn"
                            Text="{Binding Username, UpdateSourceTrigger=PropertyChanged}"
                            Style="{StaticResource MaterialDesignOutlinedTextBox}"
                            Margin="0,0,0,16"
                            FontSize="18"/>

                    <PasswordBox x:Name="PasswordBox"
                                materialDesign:HintAssist.Hint="Passord"
                                Style="{StaticResource MaterialDesignOutlinedPasswordBox}"
                                Margin="0,0,0,24"
                                FontSize="18"
                                PasswordChanged="PasswordBox_PasswordChanged"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Button Grid.Column="0"
                               Content="AVBRYT"
                               Command="{Binding CancelPasswordLoginCommand}"
                               Style="{StaticResource MaterialDesignOutlinedButton}"
                               Margin="0,0,8,0"
                               Height="48"/>

                        <Button Grid.Column="1"
                               Content="LOGG INN"
                               Command="{Binding LoginCommand}"
                               Style="{StaticResource MaterialDesignRaisedButton}"
                               Margin="8,0,0,0"
                               Height="48"/>
                    </Grid>
                </StackPanel>
            </materialDesign:Card>

            <!-- Button to show password login -->
            <Button Content="LOGG INN MED BRUKERNAVN"
                   Command="{Binding ShowPasswordLoginCommand}"
                   Style="{StaticResource MaterialDesignOutlinedButton}"
                   Visibility="{Binding ShowPasswordLogin, Converter={StaticResource InverseBoolToVisConverter}}"
                   Height="56"
                   FontSize="16"
                   Margin="0,16,0,0"/>

        </StackPanel>
    </Grid>
</UserControl>
