{
  "_comment": "Key Cabinet Application Configuration",
  "_instructions": "See README.md for detailed configuration guide",
  
  "SerialCommunication": {
    "_comment": "RS485 serial port settings for key cabinet controller",
    
    "PortName": "COM3",
    "_PortName_help": "Windows COM port name. Find with: Get-WmiObject Win32_SerialPort",
    
    "BaudRate": 9600,
    "_BaudRate_help": "Must match controller board settings. Common: 9600, 19200, 38400, 115200",
    
    "DataBits": 8,
    "_DataBits_help": "Usually 8. Options: 5, 6, 7, 8",
    
    "Parity": "None",
    "_Parity_help": "Options: None, Odd, Even, Mark, Space",
    
    "StopBits": "One",
    "_StopBits_help": "Options: None, One, Two, OnePointFive",
    
    "ReadTimeout": 1000,
    "_ReadTimeout_help": "Milliseconds to wait for response. Increase if controller is slow.",
    
    "WriteTimeout": 1000,
    "_WriteTimeout_help": "Milliseconds to wait for write completion.",
    
    "SlotCommands": {
      "_comment": "Hex command bytes to open each slot. Format: space or hyphen separated hex bytes",
      "_example_modbus": "Modbus RTU format: DeviceAddr FunctionCode RegisterHi RegisterLo ValueHi ValueLo CRC_Lo CRC_Hi",
      "_example_custom": "Your controller may use a different protocol - consult documentation",
      
      "1": "01 05 00 01 FF 00 DD FA",
      "2": "01 05 00 02 FF 00 2D FA",
      "3": "01 05 00 03 FF 00 7C 3A",
      "4": "01 05 00 04 FF 00 CD FB",
      "5": "01 05 00 05 FF 00 9C 3B",
      "6": "01 05 00 06 FF 00 3C 3B",
      "7": "01 05 00 07 FF 00 6D FB",
      "8": "01 05 00 08 FF 00 CC 38",
      "9": "01 05 00 09 FF 00 9D F8",
      "10": "01 05 00 0A FF 00 6C 38"
    },
    
    "StatusCommands": {
      "_comment": "Optional: Commands to query slot status (if hardware supports it)",
      "_example": "1: '01 03 00 01 00 01 D5 CA'",
      "_note": "Leave empty {} if not supported"
    }
  },
  
  "RemoteApi": {
    "_comment": "HTTP API for remote key opening (e.g., from dispatch center)",
    
    "Enabled": false,
    "_Enabled_help": "Set to true to enable remote API. SECURITY: Only use on isolated network or VPN!",
    
    "Port": 5000,
    "_Port_help": "HTTP port to listen on. Default: 5000. May need firewall rule.",
    
    "AllowedIpAddresses": [
      "192.168.1.100",
      "192.168.1.101"
    ],
    "_AllowedIpAddresses_help": "Whitelist of IP addresses allowed to access API. Empty array = localhost only"
  },
  
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "_Default_help": "Options: Trace, Debug, Information, Warning, Error, Critical",
      
      "Microsoft": "Warning",
      "_Microsoft_help": "Reduce noise from .NET framework logs",
      
      "System": "Warning"
    }
  },
  
  "_database_location": "%APPDATA%\\KeyCabinetApp\\keycabinet.db",
  "_default_users": [
    {
      "username": "admin",
      "password": "admin123",
      "note": "CHANGE THIS PASSWORD IMMEDIATELY!"
    },
    {
      "username": "testuser",
      "password": "test123",
      "rfid": "1234567890",
      "note": "Replace RFID with actual card ID"
    }
  ],
  
  "_common_issues": {
    "serial_not_found": "Check PortName matches Device Manager. Restart if adapter was just plugged in.",
    "rfid_not_working": "Test in Notepad. Reader must be in keyboard wedge mode.",
    "wrong_slot_opens": "SlotId in database must match key in SlotCommands config.",
    "api_not_responding": "Check Enabled=true, verify Windows Firewall allows port.",
    "database_locked": "Close any SQLite browser tools. Only one connection at a time."
  }
}
